<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Job Finder</title>

  <!-- Bootstrap -->
  <!-- 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="main.css">
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="main.js"></script>
  <!-- <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script> -->
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script> -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
  <script src="myjQuery.js"></script>

  <script>
    var system = new System(JSON.parse(localStorage.getItem('SystemObjectData')));
    var user = JSON.parse(localStorage.getItem('User'));
    user = new User(JSON.parse(localStorage.getItem('User')));
    system.setUser(user);
    localStorage.setItem('SystemObjectData', JSON.stringify(system));

    var userInfo = user.getInfo();
    var allPosts = system.getAllPosts();
  </script>

</head>
<nav class="navbar navbar-expand-lg navbar-dark bg-blue">
  <a class="navbar-brand" id="userProfileIcon">
    <img src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg" width="40"
      height="40" class="rounded-circle">
  </a>
  <!-- start of notification dropdown -->
  <div class="dropdown-menu-right">
    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
      aria-expanded="false">
      <span class="badge badge-danger ml-2">3</span>
      <i class="fa fa-bell fa-lg" style="color:antiquewhite;"></i>
    </a>

    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
      <div class="dropdown-item" href="#">
        <div>
          <a href="#" class="btn btn-link">
            <img src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg" width="40"
              height="40" class="rounded-circle">
          </a>
          <a href="#" class="btn btn-link color-black" id="">John Doe</a>
        </div>
        <div class="mt-2 offset-2">
          is requesting the <span>Yard work</span>
        </div>
        <div class="d-flex justify-content-end">
          <a href="#" class="btn btn-light bg-darkish-blue mr-2">Accept</a>
          <a href="#" class="btn btn-danger">Reject</a>
        </div>
      </div>
      <hr>
      <span class="dropdown-item" href="#">
        Please review <span>Mike Doe</span> <a href="#" class="btn btn-link pb-2 ">Review</a>
      </span>
      <hr>
      <div class="dropdown-item">
        <span>
          Please Confirm payment from <span><a href="#">John Doe</a></span>
        </span>
        <div class="d-flex justify-content-end">
          <a href="#" class="btn btn-light bg-darkish-blue mr-2">Yes</a>
          <a href="#" class="btn btn-light bg-darkish-blue">No</a>
        </div>

      </div>
      <hr>
      <span class="dropdown-item text-center"><a href="#" class="btn btn-link">View all</a></span>
    </div>
  </div>
  <!-- dripdown end -->
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <!-- Content that belongs in the alert -->
    <ul class="navbar-nav ml-auto nav-flex-icons">
      <li class="nav-item dropdown">
      </li>
    </ul>
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link " href="home.html"><i class="fa fa-home"></i> Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="myVacancies.html"><i class="fa fa-th-list"></i> My Vacanies</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" data-toggle="modal" data-target="#post"><i class="fa fa-plus"></i> Post Vacancy</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="myWorkHistory.html"><i class="fa fa-th-list"></i> My Work History</a>
      </li>
      <hr class="bg-light">
      <li class="nav-item active">
        <a class="nav-link" id="profilePage"><i class="fa fa-user"></i> Profile</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="index.html"><i class="fa fa-sign-out"></i> Sign out</a>
      </li>
    </ul>

  </div>
</nav>


<body class="bg-darkish-blue">
  <!-- Success Modal -->
  <div class="modal" id="success" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header bg-darkish-blue">
          <h5 class="modal-title" style="text-align: center;">SUCCESS</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p id="success-content" style="text-align: center;">Post was sent!</p>
          <div class="form-group">
            <button type="button" class="btn btn-light bg-darkish-blue float-right" data-dismiss="modal">Ok</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="post" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header bg-darkish-blue">
          <h5 class="modal-title " id="exampleModalLongTitle">Post a Vacancy</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>

            <div class="form-group">
              <label for="title">Title <span class="require">*</span></label>
              <input type="text" class="form-control" name="title" id="title">
            </div>

            <div class="form-group">
              <label for="description">Description</label>
              <textarea rows="5" class="form-control" name="description" id="description"></textarea>
            </div>

            <div class="form-group">
              <label for="estimatedTime">Estimated Time: <span class="require">*</span></label>
              <input type="text" class="form-control" name="title" id="estimatedTime">
            </div>

            <div class="form-group">
              <label for="availableDate">Availale Date: <span class="require">*</span></label>
              <input type="text" class="form-control" name="title" id="availableDate">
            </div>

            <div class="form-group">
              <label for="availableTime">Availale Time: <span class="require">*</span></label>
              <input type="text" class="form-control" name="title" id="availableTime">
            </div>

            <div class="form-group">
              <label for="payment">Payment: <span class="require">*</span></label>
              <input type="text" class="form-control" name="title" id="payment">
            </div>

            <div class="form-group">
              <label for="location">Location: <span class="require">*</span></label>
              <input type="text" class="form-control" name="title" id="location">
            </div>
            <div class="form-group row">
              <div class="col-6">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              </div>
              <div class="col-6 d-flex justify-content-end">
                <button type="button" class="btn btn-light bg-darkish-blue" data-dismiss="modal" data-toggle="modal"
                  data-target="#success" id="postData">Post</button>
              </div>
            </div>
        </div>
        </form>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col">
        <div class="card mt-3">
          <div class="card-body">
            <div class="row ">
              <div class="col-12">
                <img src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg"
                  width="40" height="40" class="rounded-circle">
                <p class="color-black d-inline" id="username">User Name</p>
                <a href="#" class="btn btn-light float-right" id="edit">
                  <i class="fa fa-edit"></i>
                </a>
              </div>
            </div>
            <div class="row ">
              <div class="col-6 col-md-6">
                <Span class="mt-2 d-block" id="job-title"><i class="fa fa-user"></i> Painter</Span>
                <Span class="mt-2 d-block" id="job-taken"><i class="fa fa-briefcase"></i> 50 Jobs</Span>
                <Span class="mt-2 d-block" id="reliability"><i class="fa fa-shield"></i> 80%
                  Reliable</Span>
                <Span class="mt-2 d-block" id="feedback"><i class="fa fa-commenting"></i> 90% Positive
                  Feedback</Span>
              </div>
              <div class="col-6 col-md-6">
                <h5>Contacts</h5>
                <hr>
                <Span class="mt-2 d-block" id="job-title"><i class="fa fa-phone"></i> 6574332</Span>
                <Span class="mt-2 d-block" id="job-taken"><i class="fa fa-envelope"></i>
                  @gmail.com</Span>

              </div>
            </div>
          </div>
        </div>
        <h3 class="mt-3">Reviews:</h3>
        <hr>
        <div class="card mt-3">
          <div class="card-body">
            <div class="row">
              <div class="col-md-2">
                <img src="https://image.ibb.co/jw55Ex/def_face.jpg" width="60" height="60"
                  class="img img-rounded img-fluid" />
                <span>
                  <a class="" href=""><u>Some User</u></a>
                </span>
                <p class="text-secondary">12/11/2019</p>
              </div>
              <div class="col-md-10">
                <div class="starrating risingstar d-flex justify-content-start">
                  <span class="float-right"><i class="text-warning fa fa-star"></i></span>
                  <span class="float-right"><i class="text-warning fa fa-star"></i></span>
                  <span class="float-right"><i class="text-warning fa fa-star"></i></span>
                  <span class="float-right"><i class="text-warning fa fa-star"></i></span>
                  <span class="float-right"><i class="text-warning fa fa-star"></i></span>
                </div>
                <div class="clearfix"></div>
                <p>Lorem Ipsum is simply dummy text of the pr make but also the leap into electronic
                  typesetting, remaining essentially unchanged. It was popularised in the 1960s with
                  the release of Letraset sheets containing Lorem Ipsum passages, and more recently
                  with desktop publishing software like Aldus PageMaker including versions of Lorem
                  Ipsum.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--search bar-->
  </div>

  <script>

    var system = new System(JSON.parse(localStorage.getItem('SystemObjectData')));
    var user = new User(JSON.parse(localStorage.getItem('User')));
    system.setUser(user);
    var userInfo = user.getInfo();
    var allPosts = system.getAllPosts();
    $('#postData').click(function () {

      let title = $('#title').val();
      let description = $('#description').val();
      let estimatedTime = $('#estimatedTime').val();
      let availableDate = $('#availableDate').val();
      let availableTime = $('#availableTime').val();
      let payment = $('#payment').val();
      let loca = $('#location').val();
      console.log(title + " " + description + " " + estimatedTime + " " + availableDate + " " + availableTime + " " + payment + " " + loca);

      let newPost = [
        allPosts.length,//post id
        userInfo[0][0],//user id
        title,//title
        description,//description
        payment,//payment
        loca,//location
        estimatedTime,//hours
        availableTime,//avaialble time
        availableDate,//AVIALABLE DATE
      ];
      system.createPost(newPost);
      localStorage.setItem('SystemObjectData', JSON.stringify(system));
      localStorage.setItem('User', JSON.stringify(system.getUser()));

    });

    var vars = [], hash;
    var hashes = window.location.href.slice(
      window.location.href.indexOf('?') + 1).split('&');
    for (var i = 0; i < hashes.length; i++) {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
    }
    console.log(vars);
    var userProfileData = system.getUserNameById(parseInt(vars["userId"]));
    console.log("test");
    console.log(parseInt(vars["userId"]));
    console.log(user.userInfo[0][0]);


    if (parseInt(vars["userId"]) != user.userInfo[0][0]) {
      $('#edit').hide();
    }
    $("#username").html(userProfileData);

    var profilePage = document.getElementById("profilePage");
    profilePage.href = "./profile.html?userId=" + userInfo[0][0].toString();
    document.getElementById("userProfileIcon").href = "./profile.html?userId=" + userInfo[0][0].toString();

  </script>
</body>

</html>